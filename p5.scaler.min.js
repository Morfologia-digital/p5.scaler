function createAdaptiveGraphics(t,s,i){t=new AdaptiveBuffer(createGraphics(t,s),i);return scaler.t(t),scaler.i(),t}function addAdaptiveGraphics(t,s){t=new AdaptiveBuffer(t,s);scaler.t(t),scaler.i()}p5.prototype.scaler=void 0,p5.prototype.createAdaptiveCanvas=function(t,s,i){var e=createCanvas(t,s);return scaler=new Scaler(t,s,void 0===i||i),e},p5.prototype.h=function(){void 0!==scaler&&scale(scaler.scale())},window.addEventListener("resize",function(t){scaler.o()},!0),p5.prototype.registerMethod("pre",p5.prototype.h);class AdaptiveBuffer{#l;#u;constructor(t,s){this.#l=t,this.#u=s}reRender(){this.#u(this.#l)}graphics(){return this.#l}}class Scaler{#p;#v;#m;#C;#F;#g;#A;constructor(t,s,i){this.#p=t,this.#v=s,this.#m=this.#p/this.#v,this.#F=i,this.#A=[],this.#F&&this.o()}o(){if(this.#F){let t,s;var i,e,a,r;s=void 0!==this.#g?(r=getComputedStyle(this.#g),i=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),e=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),a=parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),r=parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),t=this.#g.offsetWidth-i-a,this.#g.offsetHeight-e-r):(t=window.innerWidth,window.innerHeight),this.S(t,s)}}scaleCanvasTo(t){this.S(this.#p*t,this.#v*t)}scaleCanvasToWidth(t){this.S(t,this.#v*(t/this.#p))}scaleCanvasToHeight(t){this.S(this.#p*(t/this.#v),t)}S(t,s){let i,e;var a=Math.abs(this.#p-t),r=Math.abs(this.#v-s);Math.min(a,r)==a?(i=t,(e=t/this.#m)>s&&(e=s,i=s*this.#m)):(e=s,(i=s*this.#m)>t&&(i=t,e=t/this.#m)),this.#C=i/this.#p,resizeCanvas(i,e),this.i()}width(){return this.#p}height(){return this.#v}scale(){return this.#C}i(){for(let t=0;t<this.#A.length;t++)this.#A[t].graphics().pixelDensity(max(Math.ceil(this.#C)*displayDensity()*1.2,displayDensity())),this.#A[t].reRender()}t(t){this.#A.push(t)}setCanvasContainer(t){this.#g=t,this.o()}mouseX(){return mouseX/this.#C}mouseY(){return mouseY/this.#C}pmouseX(){return pmouseX/this.#C}pmouseY(){return pmouseY/this.#C}}
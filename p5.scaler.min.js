function createAdaptiveGraphics(s,t,i){s=new AdaptiveBuffer(createGraphics(s,t),i);return scaler.t(s),scaler.i(),s}function addAdaptiveGraphics(s,t){s=new AdaptiveBuffer(s,t);scaler.t(s),scaler.i()}p5.prototype.scaler=void 0,p5.prototype.createAdaptiveCanvas=function(s,t,i){var e=createCanvas(s,t);return scaler=new Scaler(s,t,void 0===i||i),e},p5.prototype.h=function(){void 0!==scaler&&scale(scaler.scale())},window.addEventListener("resize",function(s){scaler.u()},!0),p5.prototype.registerMethod("pre",p5.prototype.h);class AdaptiveBuffer{#o;#l;constructor(s,t){this.#o=s,this.#l=t}reRender(){this.#l(this.#o)}graphics(){return this.#o}}class Scaler{#p;#v;#m;#A;#g;#B;constructor(s,t,i){this.#p=s,this.#v=t,this.#m=this.#p/this.#v,this.#g=i,this.#B=[],this.#g&&this.u()}u(){this.#g&&this.C(window.innerWidth,window.innerHeight)}scaleCanvasTo(s){this.C(this.#p*s,this.#v*s)}C(s,t){let i,e;var r=Math.abs(this.#p-s),h=Math.abs(this.#v-t);Math.min(r,h)==r?(i=s,(e=s/this.#m)>t&&(e=t,i=t*this.#m)):(e=window.innerHeight,(i=window.innerHeight*this.#m)>s&&(i=s,e=s/this.#m)),this.#A=i/this.#p,resizeCanvas(i,e),this.i()}width(){return this.#p}height(){return this.#v}scale(){return this.#A}i(){for(let s=0;s<this.#B.length;s++)this.#B[s].graphics().pixelDensity(Math.ceil(this.#A)),this.#B[s].reRender()}t(s){this.#B.push(s)}mouseX(){return mouseX/this.#A}mouseY(){return mouseY/this.#A}pmouseX(){return pmouseX/this.#A}pmouseY(){return pmouseY/this.#A}}
function createAdaptiveGraphics(t,s,i){t=new AdaptiveBuffer(createGraphics(t,s),i);return scaler.t(t),scaler.i(),t}function addAdaptiveGraphics(t,s){t=new AdaptiveBuffer(t,s);scaler.t(t),scaler.i()}p5.prototype.scaler=void 0,p5.prototype.createAdaptiveCanvas=function(t,s,i){var e=createCanvas(t,s);return scaler=new Scaler(t,s,void 0===i),e},p5.prototype.h=function(){void 0!==scaler&&scale(scaler.scale())},window.addEventListener("resize",function(t){scaler.o()},!0),p5.prototype.registerMethod("pre",p5.prototype.h);class AdaptiveBuffer{#u;#l;constructor(t,s){this.#u=t,this.#l=s}reRender(){this.#l(this.#u)}graphics(){return this.#u}}class Scaler{#p;#v;#A;#g;#m;#B;constructor(t,s,i){this.#p=t,this.#v=s,this.#A=this.#p/this.#v,this.#m=i,this.#B=[],this.#m&&this.o()}o(){this.#m&&this.C(window.innerWidth,window.innerHeight)}scaleCanvasTo(t){this.C(this.#p*t,this.#v*t)}C(t,s){let i,e;var r=Math.abs(this.#p-t),h=Math.abs(this.#v-s);Math.min(r,h)==r?(i=t,(e=t/this.#A)>s&&(e=s,i=s*this.#A)):(e=window.innerHeight,(i=window.innerHeight*this.#A)>t&&(i=t,e=t/this.#A)),this.#g=i/this.#p,resizeCanvas(i,e),this.i()}width(){return this.#p}height(){return this.#v}scale(){return this.#g}i(){for(let t=0;t<this.#B.length;t++)this.#B[t].graphics().pixelDensity(Math.ceil(this.#g)),this.#B[t].reRender()}t(t){this.#B.push(t)}mouseX(){return mouseX/this.#g}mouseY(){return mouseY/this.#g}}
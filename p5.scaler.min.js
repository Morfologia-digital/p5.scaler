function createAdaptiveGraphics(t,s,e){t=new AdaptiveBuffer(createGraphics(t,s),e);return scaler.t(t),scaler.i(),t}function addAdaptiveGraphics(t,s){t=new AdaptiveBuffer(t,s);scaler.t(t),scaler.i()}p5.prototype.scaler=void 0,p5.prototype.createAdaptiveCanvas=function(t,s,e){var i=createCanvas(t,s);return scaler=new Scaler(t,s,void 0===e||e),i},p5.prototype.h=function(){void 0!==scaler&&scale(scaler.scale())},window.addEventListener("resize",function(t){scaler.o()},!0),p5.prototype.registerMethod("pre",p5.prototype.h);class AdaptiveBuffer{#l;#u;constructor(t,s){this.#l=t,this.#u=s}reRender(){this.#u(this.#l)}graphics(){return this.#l}}class Scaler{#p;#v;#m;#F;#C;#g;#A;constructor(t,s,e){this.#p=t,this.#v=s,this.#m=this.#p/this.#v,this.#C=e,this.#A=[],this.#C&&this.o()}o(){if(this.#C){let t,s;var e,i,a,r;s=void 0!==this.#g?(r=getComputedStyle(this.#g),e=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),a=parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),r=parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),t=this.#g.offsetWidth-e-a,this.#g.offsetHeight-i-r):(t=window.innerWidth,window.innerHeight),this.S(t,s)}}scaleCanvasTo(t){this.S(this.#p*t,this.#v*t)}S(t,s){let e,i;var a=Math.abs(this.#p-t),r=Math.abs(this.#v-s);Math.min(a,r)==a?(e=t,(i=t/this.#m)>s&&(i=s,e=s*this.#m)):(i=s,(e=s*this.#m)>t&&(e=t,i=t/this.#m)),this.#F=e/this.#p,resizeCanvas(e,i),this.i()}width(){return this.#p}height(){return this.#v}scale(){return this.#F}i(){for(let t=0;t<this.#A.length;t++)this.#A[t].graphics().pixelDensity(max(Math.ceil(this.#F)*displayDensity()*1.2,displayDensity())),this.#A[t].reRender()}t(t){this.#A.push(t)}setCanvasContainer(t){this.#g=t,this.o()}mouseX(){return mouseX/this.#F}mouseY(){return mouseY/this.#F}pmouseX(){return pmouseX/this.#F}pmouseY(){return pmouseY/this.#F}}